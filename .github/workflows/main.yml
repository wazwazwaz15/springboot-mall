#pipelineçš„åç¨±
name: Spring Boot CI Demo
#å•Ÿå‹•æ¢ä»¶ push pull_requestçš„æ™‚å€™ å•Ÿå‹•workflow
on: #Event: è§¸ç™¼è‡ªå‹•åŒ–å·¥ä½œæµç¨‹çš„åŠŸèƒ½ã€‚GitHub Action æœ‰è±å¯Œçš„è§¸æƒ…å¢ƒï¼Œåœ¨ç¬¦åˆçš„æ¢ä»¶ä¸‹å³å•Ÿå‹•å·¥ä½œ
  push:
    branches: [ "master" ]
  pull_request:
     branches: [ "master" ]

#Jobs: Job æ˜¯åœ¨åŒä¸€å€‹ Runner åŸ·è¡Œçš„ä¸€çµ„ Stepã€‚é è¨­æƒ…æ³ä¸‹é€™äº›å·¥ä½œæœƒå¹³è¡ŒåŸ·è¡Œï¼Œä½ ä¹Ÿèƒ½è¨­å®šå¾ªåºåŸ·è¡Œï¼Œç•¶å…¶ä¸­ä¸€å€‹ Job å¤±æ•—å¾Œï¼Œä¸‹ä¸€å€‹ Job ä¸æœƒåŸ·è¡Œ
jobs:
  build-and-test: #job1
    runs-on: ubuntu-latest #Runner: ä»£ç†ç¨‹å¼ï¼Œè² è²¬åŸ·è¡Œè‡ªå‹•åŒ–ç¨‹å¼çš„ä¼ºæœå™¨ï¼Œé‹ä½œåœ¨ Ubuntu Linuxã€Microsoft Windows å’Œ macOS ä¸Š

    steps: # Step: åœ¨ Job å…§å¯ä»¥åŸ·è¡Œå‘½ä»¤ç¨ç«‹å·¥ä½œï¼ŒStep å¯ä»¥æ˜¯ä¸€å€‹å‘½ä»¤æˆ–ä¸€å€‹ Actionï¼ŒåŒä¸€å€‹ Job å…§å…è¨±æ‰€æœ‰ Action å…±äº«è³‡æ–™
      - #Action: ç¨ç«‹çš„åŸ·è¡Œå…§å®¹ï¼Œå¯ä»¥è‡ªè¡Œæ’°å¯«ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ GitHub ç¤¾ç¾¤å‰µä½œçš„ Action ä¾†å®Œæˆå·¥ä½œæµç¨‹
        #{owner}/{repo}@{ref}
        #
        #ç¯„ä¾‹å¦‚ä¸‹
        #actions/heroku@main



      # Step 1ï¼šæ‹‰ä¸‹åŸå§‹ç¢¼
      - name: âœ… Checkout åŸå§‹ç¢¼
        uses: actions/checkout@v4

      # Step 2ï¼šå®‰è£ Java 17
      - name: âœ… è¨­å®š Java ç’°å¢ƒ
        uses: actions/setup-java@v3
        with:
          distribution: 'oracle'
          java-version: '17'



      # Step 3ï¼šåˆ—å°ç›®å‰çš„ Java ç‰ˆæœ¬
      - name: âœ… ç¢ºèª Java ç‰ˆæœ¬
        run: java -version

      # Step 4ï¼šå»ºæ§‹ Maven å°ˆæ¡ˆ
      - name: ğŸ”¨ Maven å»ºæ§‹
        run: mvn clean install -DskipTests=true

      # Step 5ï¼šåŸ·è¡Œå–®å…ƒæ¸¬è©¦
      - name: ğŸ§ª å–®å…ƒæ¸¬è©¦
        run: mvn test

      # Step 6ï¼šä¸Šå‚³æ‰“åŒ…å¥½çš„ JAR æˆç‚º Artifact
      - name: ğŸ“¦ ä¸Šå‚³ Jar æª”
        uses: actions/upload-artifact@v4
        with:
          name: springboot-jar
          path: target/*.jar

      # Step 7ï¼šè‡ªå®šç¾©ç’°å¢ƒè®Šæ•¸ + echo
      - name: ğŸ–¨ï¸ é¡¯ç¤ºä½œè€…åç¨±
        run: echo "ä½œè€…æ˜¯ ${{ env.AUTHOR_NAME }}"
        env:
          AUTHOR_NAME: ä¼¯å¨ æ—


